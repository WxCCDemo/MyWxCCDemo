<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Right-edge Contact Sidebar (Refined)</title>
  <style>
    :root {
      /* Layout */
      --cs-open-width: 320px;      /* width when open */
      --cs-closed-width: 72px;     /* width when closed (compact bar) */
      --cs-right-gap: 24px;        /* distance from page right edge */
      --cs-vert-gap: 24px;         /* distance from top/bottom */

      /* Aesthetics */
      --cs-bg: #0f172a;            /* panel background */
      --cs-fg: #e2e8f0;            /* primary text/icon */
      --cs-muted: #94a3b8;         /* secondary icon/text */
      --cs-accent: #38bdf8;        /* hover/focus accent */
      --cs-border: #1f2937;        /* subtle internal divider */
      --cs-radius: 12px;
      --cs-shadow: 0 10px 28px rgba(2, 6, 23, 0.28);

      /* Typography */
      --cs-font: 500 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      --cs-font-cta: 600 12px/1.1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      --cs-letter: 0.02em;

      /* Spacing */
      --cs-pad: 14px;
      --cs-gap: 12px;
      --cs-row-min: 28px;
      --cs-icon: 20px;

      /* Motion */
      --cs-ease: 220ms cubic-bezier(.2,.7,.2,1);
      --cs-arrow-open-rotation: 90deg; /* per your note: rotate 90° when open */
    }

    /* Demo page scaffold (safe to remove) */
    body {
      margin: 0;
      background: #0b1220;
      min-height: 100svh;
      color: #e5e7eb;
      font: 400 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }
    main {
      max-width: 72ch;
      padding: 40px;
    }

    /* Sidebar host */
    .contact-sidebar {
      position: fixed;
      top: var(--cs-vert-gap);
      bottom: var(--cs-vert-gap);
      right: var(--cs-right-gap);
      width: var(--cs-open-width);
      background: var(--cs-bg);
      color: var(--cs-fg);
      border-radius: var(--cs-radius);
      box-shadow: var(--cs-shadow);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr;
      border: 1px solid var(--cs-border);
      transition: width var(--cs-ease);
      isolation: isolate;
    }

    /* Closed state: compact bar; content hidden but toggle remains visible */
    .contact-sidebar.is-closed {
      width: var(--cs-closed-width);
    }

    /* Toggle (top area), visually merged with panel; arrow above text */
    .sidebar-toggle {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 8px;
      background: var(--cs-bg);
      color: var(--cs-fg);
      border: 0;
      border-bottom: 1px solid var(--cs-border);
      cursor: pointer;
      user-select: none;
      font: var(--cs-font-cta);
      letter-spacing: var(--cs-letter);
    }
    .sidebar-toggle:focus-visible {
      outline: 2px solid var(--cs-accent);
      outline-offset: -2px;
      border-radius: 0; /* keeps the merge clean */
    }

    .toggle-arrow {
      display: inline-flex;
      color: var(--cs-muted);
      transition: transform var(--cs-ease);
      transform-origin: 50% 50%;
    }
    /* Rotate arrow on open (closed = default chevron pointing left) */
    .contact-sidebar[aria-expanded="true"] .toggle-arrow {
      transform: rotate(var(--cs-arrow-open-rotation));
    }

    .toggle-text {
      color: var(--cs-fg);
    }

    /* Content area */
    .contact-list-wrap {
      overflow: auto;
    }

    .contact-list {
      list-style: none;
      margin: 0;
      padding: var(--cs-pad);
      display: grid;
      gap: var(--cs-gap);
    }

    .contact-item {
      display: grid;
      grid-template-columns: var(--cs-icon) 1fr;
      align-items: center;
      gap: 10px;
      min-height: var(--cs-row-min);
    }

    .contact-icon {
      width: var(--cs-icon);
      height: var(--cs-icon);
      display: inline-grid;
      place-items: center;
      color: var(--cs-muted);
      flex: 0 0 var(--cs-icon);
    }

    .contact-label {
      color: var(--cs-fg);
      font: var(--cs-font);
      text-decoration: none;
      word-break: break-word;
    }
    a.contact-label:hover,
    a.contact-label:focus {
      color: var(--cs-accent);
      text-decoration: underline;
    }

    /* Hide body content area when closed (keeps the compact bar clean) */
    .contact-sidebar.is-closed .contact-list-wrap {
      display: none;
    }
  </style>
</head>
<body>
  <main>
    <h1>Demo page content</h1>
    <p>
      This page shows the refined right-edge contact sidebar in the closed state by default.
      Click “Contact Us” to open. The arrow above the text indicates the state (rotates 90° on open).
    </p>
  </main>

  <!-- Sidebar (refined, merged toggle, labels next to icons) -->
  <aside id="contactSidebar" class="contact-sidebar is-closed" aria-expanded="false" aria-label="Contact sidebar">
    <!-- Toggle: arrow above text, merged with panel -->
    <button id="sidebarToggle"
            class="sidebar-toggle"
            type="button"
            aria-controls="contactSidebar"
            aria-expanded="false">
      <span class="toggle-arrow" aria-hidden="true">
        <!-- Chevron SVG (points left by default) -->
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15.5 19L8.5 12L15.5 5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </span>
      <span class="toggle-text">Contact Us</span>
    </button>

    <!-- Content: icons with labels (phone, email, address) -->
    <div class="contact-list-wrap" role="region" aria-label="Contact details">
      <ul class="contact-list">
        <li class="contact-item">
          <span class="contact-icon" aria-hidden="true">
            <!-- Phone icon -->
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92V21a1 1 0 0 1-1.09 1c-9.39-.8-16.87-8.26-17.68-17.64A1 1 0 0 1 4.22 3h4.09a1 1 0 0 1 1 .75l.86 3.22a1 1 0 0 1-.27.98l-2.2 2.2a16 16 0 0 0 6.4 6.4l2.2-2.2a1 1 0 0 1 .98-.27l3.22.86a1 1 0 0 1 .75 1z"/>
            </svg>
          </span>
          <a class="contact-label" href="tel:+6560000000">+65 6000 0000</a>
        </li>

        <li class="contact-item">
          <span class="contact-icon" aria-hidden="true">
            <!-- Email icon -->
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="5" width="18" height="14" rx="2" ry="2"/>
              <path d="M3 7l9 6 9-6"/>
            </svg>
          </span>
          <a class="contact-label" href="mailto:support@example.com">support@example.com</a>
        </li>

        <li class="contact-item">
          <span class="contact-icon" aria-hidden="true">
            <!-- Location icon -->
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 21s-6-4.35-6-10a6 6 0 1 1 12 0c0 5.65-6 10-6 10z"/>
              <circle cx="12" cy="11" r="2.5"/>
            </svg>
          </span>
          <span class="contact-label">123 Example Street, #10-01, Singapore 000000</span>
        </li>
      </ul>
    </div>
  </aside>

  <script>
    (function () {
      const sidebar = document.getElementById('contactSidebar');
      const toggle = document.getElementById('sidebarToggle');
      if (!sidebar || !toggle) return;

      function setExpanded(expanded) {
        sidebar.setAttribute('aria-expanded', String(expanded));
        toggle.setAttribute('aria-expanded', String(expanded));
        sidebar.classList.toggle('is-closed', !expanded);
      }

      toggle.addEventListener('click', () => {
        const expanded = sidebar.getAttribute('aria-expanded') === 'true';
        setExpanded(!expanded);
      });

      // Initial: closed (matches your existing baseline)
      setExpanded(false);
    })();
  </script>
</body>
</html>
